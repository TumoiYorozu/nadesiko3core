/* eslint-disable no-undef */
import assert from 'assert'
import { NakoCompiler } from '../src/nako3.mjs'

describe('dncl2 (core #41)', () => {
  const cmp = async (code, res) => {
    const nako = new NakoCompiler()
    nako.logger.debug('code=' + code)
    const resultValue = (nako.runSync(code)).log
    assert.strictEqual(resultValue, res)
  }

  it('基本', () => {
    cmp('!DNCL2\n' +
        'A=3\nAを表示', '3')
  })
  it('繰り返し文(繰り返すなし)', () => {
    cmp('!DNCL2\n' +
        'C=0\n' +
        'Iを1から10まで1ずつ増やしながら:\n' +
        '　　C=C+I\n' +
        'Cを表示', '55')
    cmp('!DNCL2\n' +
        'C=10\n' +
        'Iを1から10まで1ずつ減らしながら:\n' +
        '　　C=C-1\n' +
        'Cを表示', '0')
  })
  it('繰り返し文(繰り返すあり)', () => {
    cmp('!DNCL2\n' +
        'C=0\n' +
        'Iを1から10まで1ずつ増やしながら繰り返す:\n' +
        '　　C=C+I\n' +
        'Cを表示', '55')
    cmp('!DNCL2\n' +
        'C=10\n' +
        'Iを1から10まで1ずつ減らしながら繰り返す:\n' +
        '　　C=C-1\n' +
        'Cを表示', '0')
    cmp('!DNCL2\n' +
        'C=0\n' +
        'm を 1 から 3 まで 1 ずつ増やしながら繰り返す:\n' +
        '　　C=C+1\n' +
        'Cを表示', '3')
  })
  it('もし文', () => {
    cmp('!DNCL2\n' +
        'C=0\n' +
        'もし、C != 1ならば:\n' +
        '　　「OK」を表示。\n' +
        'そうでなければ:\n' +
        '　　「NG」を表示。\n' +
        'Cを表示', 'OK')
    cmp('!DNCL2\n' +
        'C=2\n' +
        'もし、C == 1ならば:\n' +
        '　　「NG」を表示。\n' +
        'そうでなければ、もし、C==2ならば:\n' +
        '　　「OK」を表示。\n' +
        'そうでなければ、もし、C==3ならば:\n' +
        '　　「NG」を表示。\n' +
        '', 'OK')
  })
  it('記号でインデント', () => {
    cmp('!DNCL2\n' +
        'C=0\n' +
        'もし、C != 1ならば:\n' +
        '⎿「OK」を表示。\n' +
        'そうでなければ:\n' +
        '⎿「NG」を表示。\n' +
        'Cを表示', 'OK')
    cmp('!DNCL2\n' +
        'C=2\n' +
        'もし、C == 1ならば:\n' +
        '⎿「NG」を表示。\n' +
        'そうでなければ、もし、C==2ならば:\n' +
        '⎿「OK」を表示。\n' +
        'そうでなければ、もし、C==3ならば:\n' +
        '⎿「NG」を表示。\n' +
        '', 'OK')
  })
  it('配列の初期化', () => {
    cmp('!DNCL2\n' +
        '配列 Hindo のすべての要素に 10 を代入する\n' +
        'Hindo[0]を表示\n', '10')
    cmp('!DNCL2\n' +
        '配列変数 Hirabun を初期化する\n' +
        'Hirabun[3]を表示\n', '0')
    cmp('!DNCL2\n' +
        'Totuzen[3]=30\n' +
        'Totuzen[3]を表示\n', '30')
  })
  it('「情報」試作問題 (検討用イメージ)', () => {
    cmp('!DNCL2\n' +
      'Angoubun = ["p", "y", "e", "b", " ", "c", "m", "y", "b", "o", " ", "k", "x", "n", " ", "c", "o", "f", "o", "x", " ", "i", "o", "k", "b", "c", " ", "k", "q", "y", " ", "y", "e", "b", " ", "p", "k", "d", "r", "o", "b", "c", " ", "l", "b", "y", "e", "q", "r", "d", " ", "p", "y", "b", "d", "r", " ", "y", "x", " ", "d", "r", "s", "c", " ", "m", "y", "x", "d", "s", "x", "o", "x", "d", ",", " ", "k", " ", "x", "o", "g", " ", "x", "k", "d", "s", "y", "x", ",", " ", "m", "y", "x", "m", "o", "s", "f", "o", "n", " ", "s", "x", " ", "v", "s", "l", "o", "b", "d", "i", ",", " ", "k", "x", "n", " ", "n", "o", "n", "s", "m", "k", "d", "o", "n", " ", "d", "y", " ", "d", "r", "o", " ", "z", "b", "y", "z", "y", "c", "s", "d", "s", "y", "x", " ", "d", "r", "k", "d", " ", "k", "v", "v", " ", "w", "o", "x", " ", "k", "b", "o", " ", "m", "b", "o", "k", "d", "o", "n", " ", "o", "a", "e", "k", "v", ".", " ", "x", "y", "g", " ", "g", "o", " ", "k", "b", "o", " ", "o", "x", "q", "k", "q", "o", "n", " ", "s", "x", " ", "k", " ", "q", "b", "o", "k", "d", " ", "m", "s", "f", "s", "v", " ", "g", "k", "b", ",", " ", "d", "o", "c", "d", "s", "x", "q", " ", "g", "r", "o", "d", "r", "o", "b", " ", "d", "r", "k", "d", " ", "x", "k", "d", "s", "y", "x", ",", " ", "y", "b", " ", "k", "x", "i", " ", "x", "k", "d", "s", "y", "x", " ", "c", "y", " ", "m", "y", "x", "m", "o", "s", "f", "o", "n", " ", "k", "x", "n", " ", "c", "y", " ", "n", "o", "n", "s", "m", "k", "d", "o", "n", ",", " ", "m", "k", "x", " ", "v", "y", "x", "q", " ", "o", "x", "n", "e", "b", "o", ".", " ", "g", "o", " ", "k", "b", "o", " ", "w", "o", "d", " ", "y", "x", " ", "k", " ", "q", "b", "o", "k", "d", " ", "l", "k", "d", "d", "v", "o", "-", "p", "s", "o", "v", "n", " ", "y", "p", " ", "d", "r", "k", "d", " ", "g", "k", "b", ".", " ", "g", "o", " ", "r", "k", "f", "o", " ", "m", "y", "w", "o", " ", "d", "y", " ", "n", "o", "n", "s", "m", "k", "d", "o", " ", "k", " ", "z", "y", "b", "d", "s", "y", "x", " ", "y", "p", " ", "d", "r", "k", "d", " ", "p", "s", "o", "v", "n", ",", " ", "k", "c", " ", "k", " ", "p", "s", "x", "k", "v", " ", "b", "o", "c", "d", "s", "x", "q", " ", "z", "v", "k", "m", "o", " ", "p", "y", "b", " ", "d", "r", "y", "c", "o", " ", "g", "r", "y", " ", "r", "o", "b", "o", " ", "q", "k", "f", "o", " ", "d", "r", "o", "s", "b", " ", "v", "s", "f", "o", "c", " ", "d", "r", "k", "d", " ", "d", "r", "o", " ", "x", "k", "d", "s", "y", "x", " ", "w", "s", "q", "r", "d", " ", "v", "s", "f", "o", ".", " ", "s", "d", " ", "s", "c", " ", "k", "v", "d", "y", "q", "o", "d", "r", "o", "b", " ", "p", "s", "d", "d", "s", "x", "q", " ", "k", "x", "n", " ", "z", "b", "y", "z", "o", "b", " ", "d", "r", "k", "d", " ", "g", "o", " ", "c", "r", "y", "e", "v", "n", " ", "n", "y", " ", "d", "r", "s", "c", ".", " ", "l", "e", "d", ",", " ", "s", "x", " ", "k", " ", "v", "k", "b", "q", "o", "b", " ", "c", "o", "x", "c", "o", ",", " ", "g", "o", " ", "m", "k", "x", " ", "x", "y", "d", " ", "n", "o", "n", "s", "m", "k", "d", "o", " ", "-", " ", "g", "o", " ", "m", "k", "x", " ", "x", "y", "d", " ", "m", "y", "x", "c", "o", "m", "b", "k", "d", "o", " ", "-", " ", "g", "o", " ", "m", "k", "x", " ", "x", "y", "d", " ", "r", "k", "v", "v", "y", "g", " ", "-", " ", "d", "r", "s", "c", " ", "q", "b", "y", "e", "x", "n", ".", " ", "d", "r", "o", " ", "l", "b", "k", "f", "o", " ", "w", "o", "x", ",", " ", "v", "s", "f", "s", "x", "q", " ", "k", "x", "n", " ", "n", "o", "k", "n", ",", " ", "g", "r", "y", " ", "c", "d", "b", "e", "q", "q", "v", "o", "n", " ", "r", "o", "b", "o", ",", " ", "r", "k", "f", "o", " ", "m", "y", "x", "c", "o", "m", "b", "k", "d", "o", "n", " ", "s", "d", ",", " ", "p", "k", "b", " ", "k", "l", "y", "f", "o", " ", "y", "e", "b", " ", "z", "y", "y", "b", " ", "z", "y", "g", "o", "b", " ", "d", "y", " ", "k", "n", "n", " ", "y", "b", " ", "n", "o", "d", "b", "k", "m", "d", ".", " ", "d", "r", "o", " ", "g", "y", "b", "v", "n", " ", "g", "s", "v", "v", " ", "v", "s", "d", "d", "v", "o", " ", "x", "y", "d", "o", ",", " ", "x", "y", "b", " ", "v", "y", "x", "q", " ", "b", "o", "w", "o", "w", "l", "o", "b", " ", "g", "r", "k", "d", " ", "g", "o", " ", "c", "k", "i", " ", "r", "o", "b", "o", ",", " ", "l", "e", "d", " ", "s", "d", " ", "m", "k", "x", " ", "x", "o", "f", "o", "b", " ", "p", "y", "b", "q", "o", "d", " ", "g", "r", "k", "d", " ", "d", "r", "o", "i", " ", "n", "s", "n", " ", "r", "o", "b", "o", ".", " ", "s", "d", " ", "s", "c", " ", "p", "y", "b", " ", "e", "c", " ", "d", "r", "o", " ", "v", "s", "f", "s", "x", "q", ",", " ", "b", "k", "d", "r", "o", "b", ",", " ", "d", "y", " ", "l", "o", " ", "n", "o", "n", "s", "m", "k", "d", "o", "n", " ", "r", "o", "b", "o", " ", "d", "y", " ", "d", "r", "o", " ", "e", "x", "p", "s", "x", "s", "c", "r", "o", "n", " ", "g", "y", "b", "u", " ", "g", "r", "s", "m", "r", " ", "d", "r", "o", "i", " ", "g", "r", "y", " ", "p", "y", "e", "q", "r", "d", " ", "r", "o", "b", "o", " ", "r", "k", "f", "o", " ", "d", "r", "e", "c", " ", "p", "k", "b", " ", "c", "y", " ", "x", "y", "l", "v", "i", " ", "k", "n", "f", "k", "x", "m", "o", "n", ".", " ", "s", "d", " ", "s", "c", " ", "b", "k", "d", "r", "o", "b", " ", "p", "y", "b", " ", "e", "c", " ", "d", "y", " ", "l", "o", " ", "r", "o", "b", "o", " ", "n", "o", "n", "s", "m", "k", "d", "o", "n", " ", "d", "y", " ", "d", "r", "o", " ", "q", "b", "o", "k", "d", " ", "d", "k", "c", "u", " ", "b", "o", "w", "k", "s", "x", "s", "x", "q", " ", "l", "o", "p", "y", "b", "o", " ", "e", "c", " ", "-", " ", "d", "r", "k", "d", " ", "p", "b", "y", "w", " ", "d", "r", "o", "c", "o", " ", "r", "y", "x", "y", "b", "o", "n", " ", "n", "o", "k", "n", " ", "g", "o", " ", "d", "k", "u", "o", " ", "s", "x", "m", "b", "o", "k", "c", "o", "n", " ", "n", "o", "f", "y", "d", "s", "y", "x", " ", "d", "y", " ", "d", "r", "k", "d", " ", "m", "k", "e", "c", "o", " ", "p", "y", "b", " ", "g", "r", "s", "m", "r", " ", "d", "r", "o", "i", " ", "q", "k", "f", "o", " ", "d", "r", "o", " ", "v", "k", "c", "d", " ", "p", "e", "v", "v", " ", "w", "o", "k", "c", "e", "b", "o", " ", "y", "p", " ", "n", "o", "f", "y", "d", "s", "y", "x", " ", "-", " ", "d", "r", "k", "d", " ", "g", "o", " ", "r", "o", "b", "o", " ", "r", "s", "q", "r", "v", "i", " ", "b", "o", "c", "y", "v", "f", "o", " ", "d", "r", "k", "d", " ", "d", "r", "o", "c", "o", " ", "n", "o", "k", "n", " ", "c", "r", "k", "v", "v", " ", "x", "y", "d", " ", "r", "k", "f", "o", " ", "n", "s", "o", "n", " ", "s", "x", " ", "f", "k", "s", "x", " ", "-", " ", "d", "r", "k", "d", " ", "d", "r", "s", "c", " ", "x", "k", "d", "s", "y", "x", ",", " ", "e", "x", "n", "o", "b", " ", "q", "y", "n", ",", " ", "c", "r", "k", "v", "v", " ", "r", "k", "f", "o", " ", "k", " ", "x", "o", "g", " ", "l", "s", "b", "d", "r", " ", "y", "p", " ", "p", "b", "o", "o", "n", "y", "w", " ", "-", " ", "k", "x", "n", " ", "d", "r", "k", "d", " ", "q", "y", "f", "o", "b", "x", "w", "o", "x", "d", " ", "y", "p", " ", "d", "r", "o", " ", "z", "o", "y", "z", "v", "o", ",", " ", "l", "i", " ", "d", "r", "o", " ", "z", "o", "y", "z", "v", "o", ",", " ", "p", "y", "b", " ", "d", "r", "o", " ", "z", "o", "y", "z", "v", "o", ",", " ", "c", "r", "k", "v", "v", " ", "x", "y", "d", " ", "z", "o", "b", "s", "c", "r", " ", "p", "b", "y", "w", " ", "d", "r", "o", " ", "o", "k", "b", "d", "r", "."]\n' +
      '配列 Hindo のすべての要素に 0 を代入する\n' +
      'i を 0 から 要素数(Angoubun)-1 まで 1 ずつ増やしながら:\n' +
      '｜ bangou = 差分( Angoubun[i] )\n' +
      '｜ もし bangou != -1 ならば:\n' +
      '⎿ ⎿ Hindo[bangou] = Hindo[bangou] + 1\n' +
      '表示する(Hindo)\n', '1,79,44,125,21,24,28,0,10,0,101,14,31,58,166,27,28,80,68,0,3,42,13,77,93,15')
  })
})
